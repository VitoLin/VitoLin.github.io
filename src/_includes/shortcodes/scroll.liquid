<div id="scroll-example"></div>

<style>
#scroll-example {
  margin-top: 33vh;
  position: sticky;
  top: 33vh;
  z-index: 1;
  background-color: #00ffaf;
  width: 200px;
  height: 200px;
}
</style>

<script type="module">
 import { animate } from '/js/anime.esm.min.js';
    
const divAnimation = animate('#scroll-example', {
  scale: 0,
  translateX: [0, 300, -600, 0],
  elasticity: 200,
  easing: 'easeInOutCubic',
  autoplay: false,
  opacity: 0.7
});

/**
 * Calculate the scroll percentage position
 */
const scrollPercent = () => {
  const bodyST = document.body.scrollTop;
  const docST = document.documentElement.scrollTop;
  const docSH = document.documentElement.scrollHeight;
  const docCH = document.documentElement.clientHeight;
  
  
  return (docST + bodyST) / (docSH - docCH) * 100
}

/**
 * Add a scroll listener on the window object to
 * control animations based on scroll percentage.
 */
window.onscroll = () => {
  divAnimation.seek((scrollPercent() / 100) * divAnimation.duration);
};
</script>
